(this["webpackJsonpkeyboard-warrior"]=this["webpackJsonpkeyboard-warrior"]||[]).push([[0],{57:function(e,t,a){},58:function(e,t,a){},71:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(1),s=a.n(r),c=a(12),i=a.n(c),o=a(4),l=a.n(o),u=a(7),d=a(11);function j(e){var t,a=0,n=Object(d.a)(e);try{for(n.s();!(t=n.n()).done;){!1===t.value.beaten&&(a+=1)}}catch(r){n.e(r)}finally{n.f()}return a}function b(e){var t,a=0,n=Object(d.a)(e);try{for(n.s();!(t=n.n()).done;){!0===t.value.beaten&&(a+=1)}}catch(r){n.e(r)}finally{n.f()}return a}var h=a(8),m=a(3),O=a(2),p=a(5),f=a.n(p);a(57);var g=function(e){var t=e.leaders.map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:e.player_name}),Object(n.jsx)("td",{children:e.score})]})}));return Object(n.jsxs)("table",{className:"leaderboard",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Player"}),Object(n.jsx)("th",{children:"Score"})]})}),Object(n.jsx)("tbody",{children:t})]})};a(58);function x(e){var t=Object(r.useState)([{player_name:"Data loading",score:"N/A"}]),a=Object(O.a)(t,2),n=a[0],s=a[1],c=Object(r.useState)(!1),i=Object(O.a)(c,2);function o(){return(o=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t?"?page=".concat(t):"",e.next=3,f.a.get("/api/leaders".concat(a));case 3:n=e.sent,s(n.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{leaders:n,getLeaders:function(e){return o.apply(this,arguments)},leadersShow:i[0],setLeadersShow:i[1]}}var y=function(e){var t=x(),a=t.leaders,r=t.getLeaders,s=t.leadersShow,c=t.setLeadersShow,i=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=4;break}c(!1),e.next=7;break;case 4:return e.next=6,r();case 6:c(!0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)("main",{className:"start-game",children:[Object(n.jsx)("h1",{children:"Keyboard Warrior"}),Object(n.jsxs)("menu",{children:[Object(n.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.onSubmit(e.game.player_name,e.setMode)},children:[Object(n.jsxs)("label",{htmlFor:"name",children:["Player Name",Object(n.jsx)("span",{children:"*"})]}),Object(n.jsx)("br",{}),Object(n.jsx)("input",{onChange:function(t){return e.setGame({player_name:t.target.value})},value:e.game.player_name||"",type:"text",id:"name",placeholder:"Enter player name",name:"name","data-cy":"enter-name",required:!0}),Object(n.jsx)("br",{}),Object(n.jsx)("input",{className:"primary",type:"submit",value:"Start Game",disabled:0===Object.keys(e.game).length||0===e.game.player_name.length})]}),Object(n.jsx)("button",{className:"primary",onClick:function(){return e.setMode("CREDITS")},children:"Credits"}),Object(n.jsx)("button",{className:"primary",onClick:function(){return e.setMode("INSTRUCTIONS")},children:"Instructions"}),Object(n.jsx)("button",{className:"primary",onClick:i,children:s?"Hide Leaderboard":"Show Leaderboard"}),s&&Object(n.jsx)(g,{leaders:a})]})]})};var v=function(e){var t=e.arenas,a=e.currentDoor,r=e.setCurrentDoor,s=t[a],c="boolean"===typeof s.beaten,i=c?"card card-disabled":"card";return Object(n.jsxs)("div",{className:"door",children:[Object(n.jsx)("img",{className:"door-arrow left",alt:"Go left",src:"/images/left_arrow_circle.png",onClick:function(){r((function(e){return 0!==e?e-1:e}))}}),Object(n.jsxs)("div",{className:i,"data-cy":"enter-arena",title:c?"No rematches! Please choose another arena":"Enter arena",onClick:function(){c||(e.setGameMode("ARENA"),e.setArena(s))},children:[Object(n.jsx)("h3",{children:s.name}),Object(n.jsx)("img",{className:"door-image",alt:"Enter "+s.name,src:s.arena_card}),Object(n.jsxs)("footer",{children:[void 0===s.beaten&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"difficulty",children:[Object(n.jsx)("img",{src:s.Difficulty.icon,alt:s.Difficulty.name}),s.Difficulty.name]}),Object(n.jsxs)("div",{className:"points",children:[Object(n.jsx)("img",{src:"/images/green-diamond.png",alt:s.points+" points"}),s.points+" PTS"]})]}),!0===s.beaten&&Object(n.jsx)("aside",{children:"Congrats, you beat this level!"}),!1===s.beaten&&Object(n.jsx)("aside",{children:"You were defeated!"})]})]}),Object(n.jsx)("img",{className:"door-arrow right",alt:"Go right",src:"/images/right_arrow_circle.png",onClick:function(){r((function(e){return e!==t.length-1?e+1:e}))}})]})};var w=function(e){var t=e.selected?"/images/yellow-dot.png":"/images/grey-dot.png",a=e.selected?"selected":"";return Object(n.jsx)("img",{className:"door-slider "+a,"data-cy":"door-slider",alt:"door",src:t,onClick:function(){return e.setCurrentDoor(e.index)}})};var N=function(e){var t=function(){var e=Object(r.useState)(0),t=Object(O.a)(e,2),a=t[0],n=t[1];return{currentDoor:a,setCurrentDoor:n,handleCurrentDoor:function(e){return e===a}}}(),a=t.currentDoor,s=t.setCurrentDoor,c=t.handleCurrentDoor,i=e.arenas.map((function(e){return e.name.toLowerCase().replace(/\s/g,"-")})),o=e.arenas.map((function(e,t){return Object(n.jsx)(w,{index:t,selected:c(t),setCurrentDoor:s},e.name+"-slider")}));return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{children:"Choose your arena!"}),Object(n.jsx)("div",{className:"door-slider-dots",children:o}),Object(n.jsx)("div",{className:"doors-container",children:Object(n.jsx)(v,{setGameMode:e.setGameMode,currentDoor:a,setCurrentDoor:s,arenas:e.arenas,setArena:e.setArena,doorTagArray:i})})]})},k=a(27),S=a(28),A=a(33),M=a(32),T=(a(59),a(9)),E=function(e){Object(A.a)(a,e);var t=Object(M.a)(a);function a(){return Object(k.a)(this,a),t.apply(this,arguments)}return Object(S.a)(a,[{key:"render",value:function(){var e="/images/player-notch.gif",t=parseInt(this.props.arenasBeaten);return Object(n.jsx)("span",{title:"You have won ".concat(this.props.arenasBeaten," ").concat(1===this.props.arenasBeaten?"battle":"battles",". \n      Win ").concat(5-this.props.arenasBeaten," more and beat the final boss to win the game!"),children:Object(n.jsxs)(T.ProgressBar,{percent:parseInt(this.props.arenasBeaten)*(100/6),filledBackground:"linear-gradient(to right, #fefb72, #f0bb31)",children:[Object(n.jsx)(T.Step,{transition:"scale",children:function(a){var r=a.accomplished;return Object(n.jsx)("img",{style:{filter:"grayscale(".concat(r?0:80,"%)")},src:0===t?e:"/images/zero.png",alt:"Start"})}}),Object(n.jsx)(T.Step,{transition:"scale",children:function(a){var r=a.accomplished;return Object(n.jsx)("img",{style:{filter:"grayscale(".concat(r?0:80,"%)")},src:1===t?e:"/images/one.png",alt:"Level 1"})}}),Object(n.jsx)(T.Step,{transition:"scale",children:function(a){var r=a.accomplished;return Object(n.jsx)("img",{style:{filter:"grayscale(".concat(r?0:80,"%)")},src:2===t?e:"/images/two.png",alt:"Level 2"})}}),Object(n.jsx)(T.Step,{transition:"scale",children:function(a){var r=a.accomplished;return Object(n.jsx)("img",{style:{filter:"grayscale(".concat(r?0:80,"%)")},src:3===t?e:"/images/three.png",alt:"Level 3"})}}),Object(n.jsx)(T.Step,{transition:"scale",children:function(a){var r=a.accomplished;return Object(n.jsx)("img",{style:{filter:"grayscale(".concat(r?0:80,"%)")},src:4===t?e:"/images/four.png",alt:"Level 4"})}}),Object(n.jsx)(T.Step,{transition:"scale",children:function(a){var r=a.accomplished;return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("img",{style:{filter:"grayscale(".concat(r?0:80,"%)")},src:5===t?e:"/images/five.png",alt:"Level 5"})})}}),Object(n.jsx)(T.Step,{transition:"scale",children:function(a){a.accomplished;return Object(n.jsx)("img",{src:6===t?e:"/images/boss_icon.png",alt:"Level 6"})}})]})})}}]),a}(s.a.Component);a(71);var C=function(e){return Object(r.useEffect)((function(){e.updateScore()}),[e.game]),Object(n.jsxs)("main",{className:"map",children:[Object(n.jsx)(E,{arenasBeaten:e.arenasBeaten}),Object(n.jsx)(N,{arenas:e.arenas,setGameMode:e.setGameMode,arena:e.arena,setArena:e.setArena}),Object(n.jsxs)("p",{className:"score",children:["POINTS: ",Object(n.jsx)("strong",{children:e.score})]})]})},B=a(29),L=a.n(B);var G=function(e){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("img",{src:"/images/red-cross.png",alt:"Health",onClick:function(){return e.onClick(10)}}),Object(n.jsx)(L.a,{animationDelay:0,animationDuration:200,height:"1.5rem",skills:[{type:"Health",level:e.health}],colors:{bar:"#00E436",title:{text:"#000",background:"#fff"}}})]})};var I=function(e){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{children:e.name}),Object(n.jsx)("img",{src:e.filename,alt:e.name+"'s avatar"})]})},D=a(30);var _=function(e){return Object(n.jsxs)("li",{children:[Object(n.jsx)("img",{src:e.icon,alt:e.name,title:'Type "'.concat(e.word.toUpperCase(),'" to ').concat(e.name)}),Object(n.jsx)("div",{className:"action-word","data-cy":e.name+"-word",title:'Type "'.concat(e.word.toUpperCase(),'" to ').concat(e.name),children:Object(n.jsx)(D.a,{className:"action-word",content:e.word})})]})};var R=function(e){var t={handleWordMatch:function(e,t){return t.find((function(t){return t.word===e.toLowerCase()}))},handleLetterMatch:function(e,t){return e.length>0?t.map((function(t){return t.word.slice(0,e.length)})).indexOf(e.toLowerCase()):-1}}.handleLetterMatch,a=e.playerInput,r=e.playerActions,s=t(a,r);if(s>=0){var c=r[s];c.wordDOM='<pre class="match">'.concat(c.word.slice(0,a.length),"</pre><pre>").concat(c.word.slice(a.length),"</pre>")}else r.forEach((function(e){return e.wordDOM=e.word}));var i=r.map((function(e){return Object(n.jsx)(_,{name:e.name,icon:e.icon,word:e.wordDOM||e.word},e.name)}));return Object(n.jsx)("ul",{children:i})};var P=function(e){var t={position:"absolute",height:"inherit",left:"0px",width:e.percentage+"%",backgroundColor:"red",transitionProperty:"width",transitionDuration:e.duration+"ms",transitionTimingFunction:"linear"};return Object(n.jsxs)("div",{className:"challenger-actions",children:[Object(n.jsx)("p",{children:"NEXT ATTACK"}),Object(n.jsxs)("div",{className:"bar-container",children:[" ",Object(n.jsx)("div",{className:"timer-bar",style:t,children:" "})]})]})};var W=function(e){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("input",{autoFocus:!0,type:"text",name:"input",placeholder:"Type words above to attack or heal!",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})})};a(73);function F(e,t,a){var n,r=[],s=Object(d.a)(e);try{for(s.s();!(n=s.n()).done;){var c=n.value;if(c.name===t&&a){var i=Object(m.a)(Object(m.a)({},c),{},{beaten:!0});r.push(i)}else if(c.name!==t||a)r.push(c);else{var o=Object(m.a)(Object(m.a)({},c),{},{beaten:!1});r.push(o)}}}catch(l){s.e(l)}finally{s.f()}return r}var Y=function(e){var t=Object(r.useState)([]),a=Object(O.a)(t,2),s=a[0],c=a[1],i=Object(r.useState)([0,0]),o=Object(O.a)(i,2),d=o[0],h=(o[1],Object(r.useState)({player:e.initialPlayerHealth,challenger:e.challengerHealth})),p=Object(O.a)(h,2),g=p[0],x=p[1],y=Object(r.useState)(""),v=Object(O.a)(y,2),w=v[0],N=v[1],k=function(e){var t=Object(r.useState)(e),a=Object(O.a)(t,2);return{attackTime:a[0],setAttackTime:a[1]}}(e.arena.Difficulty.attack_time_ms).attackTime,S={handleWordMatch:function(e,t){return t.find((function(t){return t.word===e.toLowerCase()}))},handleLetterMatch:function(e,t){return e.length>0?t.map((function(t){return t.word.slice(0,e.length)})).indexOf(e.toLowerCase()):-1}}.handleWordMatch,A=Object(r.useState)(20),M=Object(O.a)(A,2),T=M[0],E=M[1],C=e.startBattle,B=e.endBattle,L=e.style,D=e.handleAttackAnimation,_=e.currentBattle,Y=e.setCurrentBattle;Object(r.useEffect)((function(){function t(){return(t=Object(u.a)(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Y(C(e.game.id,e.arena.id)),t.prev=1,t.next=4,f.a.get("/api/action-words/".concat(e.arena.id));case 4:a=t.sent,console.log("Current battle is: ",_),n=a.data.map((function(e,t){return Object(m.a)(Object(m.a)({},e),{},{word:e.words[0]})})),c(n),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log("Error getting data: ",t.t0);case 13:case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e.arena.id]),Object(r.useEffect)((function(){var e,t=S(w,s);if(t){switch(e=D("player",t.name),H(t),t.name){case"attack":U("challenger",-10);break;case"heal":U("player",20)}N("")}return function(){return clearTimeout(e)}}),[w]),Object(r.useEffect)((function(){var t=setInterval((function(){0===T?(D("challenger"),E(19),U("player",-e.arena.Difficulty.damage_per_hit)):E((function(e){return e-1}))}),k/20);return function(){return clearInterval(t)}}),[T,k]);var H=function(e){var t=s.indexOf(e);d[t]===e.words.length-1?d[t]=0:d[t]++,s[t].word=s[t].words[d[t]]},U=function(e,t){x((function(a){var n=Object(m.a)({},a);return n[e]=Math.min(Math.max(n[e]+t,0),100),n}))};function J(){return(J=Object(u.a)(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==g.player){t.next=11;break}return"Boss"===e.arena.name?e.setOutcome("LOSEGAMETOBOSS"):j(e.arenas)>=2?e.setOutcome("LOSEGAMENOTBOSS"):(e.setOutcome("LOSEBATTLE"),e.setArenas(F(e.arenas,e.arena.name,!1))),e.setMode("TRANSITION"),console.log("current battle is: ",_),t.next=6,B(!1,_);case 6:a=t.sent,Y(a),e.setMode("OUTCOME"),t.next=20;break;case 11:if(0!==g.challenger){t.next=20;break}return"Boss"===e.arena.name?e.setOutcome("WINGAME"):b(e.arenas)>=4?(e.setOutcome("WINALLARENAS"),e.setMode("OUTCOME")):(e.setOutcome("WINBATTLE"),e.setArenas(F(e.arenas,e.arena.name,!0))),e.setMode("TRANSITION"),console.log("current battle is: ",_),t.next=17,B(!0,_);case 17:n=t.sent,Y(n),e.setMode("OUTCOME");case 20:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){J.apply(this,arguments)}()}),[g]),Object(n.jsx)("main",{className:"arena",children:Object(n.jsxs)("div",{className:"window",children:[Object(n.jsxs)("div",{className:"window-bar",children:[Object(n.jsx)("span",{className:"dot close"}),Object(n.jsx)("span",{className:"dot minimize"}),Object(n.jsx)("span",{className:"dot maximize"}),Object(n.jsx)("span",{className:"window-title",children:e.arena.name})]}),Object(n.jsxs)("div",{className:"window-content",children:[Object(n.jsx)("div",{className:"health-bar","data-cy":"health-bar",children:Object(n.jsx)(G,{health:g.player,onClick:function(){U("player",-10)}})}),Object(n.jsx)("div",{className:"health-bar","data-cy":"health-bar",children:Object(n.jsx)(G,{health:g.challenger,onClick:function(){U("challenger",-10)}})}),Object(n.jsxs)("div",{className:"avatar player",children:[Object(n.jsx)(I,{name:e.game.player_name||"Player",filename:"/images/boss-spirit-fighter.png"}),Object(n.jsx)("img",{className:"action player",src:"/images/player-attack.png",alt:"Player attacks",style:L.player.attack}),Object(n.jsx)("img",{className:"action player",src:"/images/player-heal.png",alt:"Player heals",style:L.player.heal})]}),Object(n.jsxs)("div",{className:"avatar challenger",children:[Object(n.jsx)(I,{name:e.arena.challenger_name,filename:e.arena.challenger_sprite}),Object(n.jsx)("img",{className:"action challenger",src:"/images/challenger-attack.png",alt:"Challenger attacks",style:L.challenger})]}),Object(n.jsx)("div",{className:"player-actions","data-cy":"player-actions",children:Object(n.jsx)(R,{playerActions:s,playerInput:w})}),Object(n.jsx)("div",{className:"challenger-actions",children:Object(n.jsx)(P,{attack:"/images/sword.png",duration:k/20,percentage:T/20*100})}),Object(n.jsx)("div",{className:"typing","data-cy":"type-here",children:Object(n.jsx)(W,{value:w,onChange:N})})]})]})})},H=function(e){return Object(n.jsx)("main",{className:"outcome win-game",children:Object(n.jsxs)("div",{className:"message",children:[Object(n.jsx)("h1",{children:"YOU WON! CONGRATS!"}),Object(n.jsxs)("p",{children:["With your victory over the boss, you earned ",e.lastResult," points."]}),Object(n.jsxs)("p",{children:["Your final score is ",e.score," points. If it's high enough, you'll see it in the leaderboard below!"]}),Object(n.jsx)("button",{className:"primary",onClick:function(){e.resetGame()},children:"Back to Start"}),Object(n.jsx)(g,{leaders:e.leaders})]})})},U=function(e){return Object(n.jsxs)("table",{children:[Object(n.jsx)("thead",{}),Object(n.jsxs)("tbody",{children:[Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"Base Score: "}),Object(n.jsx)("td",{children:e.result.baseScore})]}),Object(n.jsxs)("tr",{title:"You took ".concat(e.result.player_time," seconds to complete a level where the benchmark time was ").concat(e.result.par_time," s"),children:[Object(n.jsx)("td",{children:"Speed Bonus: "}),Object(n.jsxs)("td",{children:[e.result.speedBonus,"x"]})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"This round you earned:"}),Object(n.jsxs)("td",{children:[e.result.lastResult," points!"]})]})]})]})},J=function(e){return Object(n.jsx)("main",{className:"outcome win-battle",children:Object(n.jsxs)("div",{className:"message",children:[Object(n.jsx)("h1",{children:"VICTORY"}),Object(n.jsxs)("p",{children:["Congrats, you have triumphed over ",e.arena.challenger_name," in ",e.arena.name,"!"]}),e.allArenas&&Object(n.jsx)("p",{children:"You beat 5 levels! That means you now enter the arena with the boss. Win this fight and you win the game. Good luck!"}),Object(n.jsx)(U,{result:e.resultProps}),Object(n.jsxs)("p",{children:[e.allArenas?"Heading into the final fight, you have":"You now have"," a total of ",e.score," points."]}),Object(n.jsx)("button",{className:"primary",onClick:e.allArenas?function(){e.setArena(e.cleanArenas.find((function(e){return"Boss"===e.name}))),e.setMode("ARENA")}:function(){return e.setMode("MAP")},children:e.allArenas?"Continue To Boss!":"Choose Next Battle!"})]})})},z=function(e){return Object(n.jsx)("main",{className:"outcome lose-battle",children:Object(n.jsxs)("p",{className:"message",children:[Object(n.jsx)("h1",{children:"DEFEAT"}),Object(n.jsx)("p",{children:"There's no sugercoating this - losing sucks. But the great thing is this, you still have some more chances!"}),Object(n.jsxs)("p",{children:["You remain at ",e.score," points."]}),Object(n.jsx)("button",{className:"primary",onClick:function(){return e.setMode("MAP")},children:"Choose next battle"})]})})},K=function(e){return Object(n.jsx)("main",{className:"outcome lose-game",children:Object(n.jsxs)("div",{className:"message",children:[Object(n.jsx)("h1",{children:"GAME OVER"}),Object(n.jsx)("p",{children:"Uh oh! Three strikes you're out! You can try again from the beginning though."}),Object(n.jsxs)("p",{children:["You collected ",e.score," points this game. However, because you did not make it to the final boss, your name will not be immortalized on the leaderboard."]}),Object(n.jsx)(g,{leaders:e.leaders}),Object(n.jsx)("button",{className:"primary",onClick:function(){e.resetGame()},children:"Back to start"})]})})},q=function(e){return Object(n.jsx)("main",{className:"outcome lose-game",children:Object(n.jsxs)("div",{className:"message",children:[Object(n.jsx)("h1",{children:"DEFEAT"}),Object(n.jsx)("p",{children:"You put up a valiant fight, but the boss was too much for you. Too bad. You can try again though!"}),Object(n.jsxs)("p",{children:["You collected ",e.score," points this game. However, because you did not defeat the final boss, your name will not be immortalized on the leaderboard."]}),Object(n.jsx)(g,{leaders:e.leaders}),Object(n.jsx)("button",{className:"primary",onClick:function(){e.resetGame()},children:"Back to start"})]})})};a(74);var V=function(e){var t="WINGAME",a="LOSEBATTLE",s="WINBATTLE",c="LOSEGAMENOTBOSS",i="LOSEGAMETOBOSS",o="WINALLARENAS",l=e.outcome,u=x(),d=u.leaders,j=u.getLeaders,b=e.soundMedia,h=e.updateScore;Object(r.useEffect)((function(){h(),j()}),[]),Object(r.useEffect)((function(){switch(l){case t:b.current.src="/sounds/win-game.mp3";break;case s:case o:b.current.src="/sounds/win-battle.mp3";break;case a:b.current.src="/sounds/lose-battle.mp3";break;case c:case i:b.current.src="/sounds/lose-game.mp3";break;default:b.current.src="/sounds/background-music.ogg"}return b.current.loop=!1,function(){b.current.src="/sounds/background-music.ogg",b.current.loop=!0}}),[b,l]);var m={par_time:e.arena.Difficulty.par_time,player_time:e.currentBattle.time_seconds,speedBonus:Math.round(100*Math.max(1,e.arena.Difficulty.par_time/e.currentBattle.time_seconds))/100,baseScore:e.arena.points,lastResult:e.currentBattle.score};return Object(n.jsxs)(n.Fragment,{children:[l===t&&Object(n.jsx)(H,{setMode:e.setMode,resetGame:e.resetGame,leaders:d,score:e.score,lastResult:e.currentBattle.score,soundMedia:e.soundMedia}),l===a&&Object(n.jsx)(z,{setMode:e.setMode,soundMedia:e.soundMedia,lastResult:e.currentBattle.score,score:e.score}),l===s&&Object(n.jsx)(J,{allArenas:!1,setMode:e.setMode,soundMedia:e.soundMedia,arena:e.arena,resultProps:m,score:e.score}),l===c&&Object(n.jsx)(K,{setMode:e.setMode,soundMedia:e.soundMedia,leaders:d,lastResult:e.currentBattle.score,score:e.score,resetGame:e.resetGame}),l===i&&Object(n.jsx)(q,{setMode:e.setMode,soundMedia:e.soundMedia,leaders:d,lastResult:e.currentBattle.score,score:e.score,resetGame:e.resetGame}),l===o&&Object(n.jsx)(J,{allArenas:!0,setMode:e.setMode,soundMedia:e.soundMedia,setArena:e.setArena,arena:e.arena,resultProps:m,score:e.score}),"PENDING"===l&&Object(n.jsx)("main",{children:"Oops, looks like an error occurred. The result state shouldn't be pending!"})]})};a(75);var X=function(e){return Object(n.jsx)("main",{className:"credits",children:Object(n.jsxs)("div",{className:"credits",children:[Object(n.jsx)("h1",{children:"Thanks for playing!"}),Object(n.jsx)("h2",{children:"Credits:"}),Object(n.jsx)("h3",{children:"Game Design, Programming & Styling"}),Object(n.jsxs)("div",{className:"credits-container",children:[Object(n.jsxs)("div",{className:"credit",children:[Object(n.jsx)("h4",{children:"Helen Ouyang"}),Object(n.jsxs)("div",{className:"logos",children:[Object(n.jsx)("a",{href:"https://github.com/helenohyeah",rel:"noopener noreferrer",target:"_blank",children:Object(n.jsx)("img",{className:"logo",alt:"Github",title:"Github",src:"/images/github-logo.png"})}),Object(n.jsx)("a",{href:"https://www.linkedin.com/in/helenouyang/",rel:"noopener noreferrer",target:"_blank",children:Object(n.jsx)("img",{className:"logo",alt:"LinkedIn",title:"LinkedIn",src:"/images/linkedin-logo.png"})})]}),Object(n.jsx)("img",{className:"portrait",src:"/images/helen.png",alt:"Helen"})]}),Object(n.jsxs)("div",{className:"credit",children:[Object(n.jsx)("img",{className:"portrait",src:"/images/jillian.png",alt:"Jillian"}),Object(n.jsx)("h4",{children:"Jillian Martin"}),Object(n.jsxs)("div",{className:"logos",children:[Object(n.jsx)("a",{href:"https://github.com/jilliankmartin",rel:"noopener noreferrer",target:"_blank",children:Object(n.jsx)("img",{className:"logo",alt:"Github",title:"Github",src:"/images/github-logo.png"})}),Object(n.jsx)("a",{href:"https://www.linkedin.com/in/jilliankmartin/",rel:"noopener noreferrer",target:"_blank",children:Object(n.jsx)("img",{className:"logo",alt:"Linkedin",title:"LinkedIn",src:"/images/linkedin-logo.png"})})]})]}),Object(n.jsxs)("div",{className:"credit",children:[Object(n.jsx)("h4",{children:"Sherwin Kwan"}),Object(n.jsxs)("div",{className:"logos",children:[Object(n.jsx)("a",{href:"https://github.com/sherwin-kwan",rel:"noopener noreferrer",target:"_blank",children:Object(n.jsx)("img",{className:"logo",alt:"Github",title:"Github",src:"/images/github-logo.png"})}),Object(n.jsx)("a",{href:"https://www.linkedin.com/in/sherwinkwan/",rel:"noopener noreferrer",target:"_blank",children:Object(n.jsx)("img",{className:"logo",alt:"Linkedin",title:"LinkedIn",src:"/images/linkedin-logo.png"})})]}),Object(n.jsx)("img",{className:"portrait",src:"/images/sherwin.png",alt:"Sherwin"})]})]}),Object(n.jsx)("p",{children:"Special thanks to Travis Borsa, Andy Lindsay, Brian Chang, James Cash, Dmitry Besson, John Lee, Rob Schwitzer, Afshan Khatoon, and our friends and family for putting up with us being AWOL while we built this game."}),Object(n.jsx)("button",{className:"primary",onClick:function(){return e.setMode("START")},children:"Back to Start"}),Object(n.jsxs)("p",{className:"footnotes",children:["(C) 2020 Helen Ouyang, Jillian Martin, and Sherwin Kwan. ",Object(n.jsx)("br",{}),"Keyboard Warrior is free and open-source software. ",Object(n.jsx)("a",{href:"",children:"See source repo"}),". ",Object(n.jsx)("br",{}),"We welcome collaboration! If you spot a bug, feel free to report it ",Object(n.jsx)("a",{href:"https://github.com/sherwin-kwan/word-game/issues",children:"here! "}),Object(n.jsx)("br",{}),"(Or if you're feeling really hard core, fix the code and send us a pull request!)"]})]})})};a(76);var Q=function(e){var t=x(),a=t.leaders,s=t.getLeaders;return Object(r.useEffect)((function(){s()}),[]),Object(n.jsx)("main",{className:"instructions",children:Object(n.jsxs)("div",{className:"instructions",children:[Object(n.jsx)("h1",{children:"Instructions"}),Object(n.jsx)("h2",{children:"Your Objective:"}),Object(n.jsx)("p",{children:"Win 5 battles to get to the final boss. Then beat the boss to win the game!"}),Object(n.jsx)("img",{src:"/images/progress-bar.png",alt:"Progress bar"}),Object(n.jsx)("h2",{children:"Battling:"}),Object(n.jsx)("p",{children:"Type the words that show up to attack for 10 damage or heal 20 health."}),Object(n.jsx)("img",{src:"/images/words-to-type.png",alt:"Battle arena"}),Object(n.jsx)("h2",{children:"Scoring:"}),Object(n.jsx)("p",{children:"Earn more points by choosing more difficult arenas."}),Object(n.jsx)("img",{src:"/images/difficulty-and-points.png",alt:"Difficulty and points"}),Object(n.jsx)("p",{children:'"30 PTS" is the base score you get for winning the battle.'}),Object(n.jsx)("p",{children:"If you beat the game faster, you'll get a bonus multiplier and top the leaderboards!"}),Object(n.jsx)("p",{children:"CURRENT LEADERS"}),Object(n.jsx)(g,{leaders:a}),Object(n.jsx)("button",{className:"primary",onClick:function(){return e.setMode("START")},children:"Got it? Let's play!"})]})})},Z=function(e){var t=e.music,a=e.setMusic;return Object(n.jsx)("aside",{className:"mute-music",children:Object(n.jsx)("img",{src:t?"/images/unmute-music.png":"/images/mute-music.png",onClick:function(){return a((function(e){return!e}))},alt:t?"mute music":"unmute music"})})};a(77);var $=function(e){var t=Object(r.useState)(""),a=Object(O.a)(t,2),s=a[0],c=a[1];return Object(r.useEffect)((function(){var t=setTimeout((function(){c(e.message||"Please be patient while the next screen loads")}),1e3);return function(){return clearTimeout(t)}}),[]),Object(n.jsxs)("main",{className:"transition",children:[Object(n.jsx)("img",{src:"/images/status.png",alt:"Loading"}),Object(n.jsx)("p",{children:s})]})};var ee=function(e){var t="OUTCOME",a=function(e){var t=Object(r.useState)(e),a=Object(O.a)(t,2);return{mode:a[0],setMode:a[1]}}("START"),s=a.mode,c=a.setMode,i=function(){var e=Object(r.useState)([]),t=Object(O.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)({}),c=Object(O.a)(s,2),i=c[0],o=c[1],l=Object(r.useState)([]),u=Object(O.a)(l,2),d=u[0],j=u[1];return Object(r.useEffect)((function(){f.a.get("/api/arenas").then((function(e){var t=e.data.filter((function(e){return"Boss"!==e.name}));n(t),j(e.data)})).catch((function(e){return console.log("Error getting Arena data: ",e)}))}),[]),{arenas:a,setArenas:n,arena:i,setArena:o,cleanArenas:d}}(),o=i.arenas,d=i.setArenas,j=i.arena,p=i.setArena,g=i.cleanArenas,x=function(e){var t=Object(r.useState)(e),a=Object(O.a)(t,2);return{outcome:a[0],setOutcome:a[1]}}("PENDING"),v=x.outcome,w=x.setOutcome,N=function(){var e=Object(r.useState)({}),t=Object(O.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)({player:{attack:{},heal:{}},challenger:{}}),c=Object(O.a)(s,2),i=c[0],o=c[1];function d(){return(d=Object(u.a)(l.a.mark((function e(t,a){var n,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("input battle is: ",a),n=Object(m.a)(Object(m.a)({},a),{},{win:t,end_time:new Date}),e.prev=2,console.log("Battle is: ".concat(n)),e.next=6,f.a.post("/api/battles",n);case 6:return r=e.sent,s=Object(m.a)(Object(m.a)({},n),{},{score:r.data.score,time_seconds:r.data.time_seconds}),e.abrupt("return",s);case 11:e.prev=11,e.t0=e.catch(2),console.log("Error Posting Battle:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}return{startBattle:function(e,t){return{game_id:e,arena_id:t,start_time:new Date}},endBattle:function(e,t){return d.apply(this,arguments)},currentBattle:a,setCurrentBattle:n,style:i,handleAttackAnimation:function(e,t){var a={visibility:"visible",animation:"blink 1s steps(4, end) 0s infinite"},n={visibility:"hidden "};"player"===e?(o((function(n){return Object(m.a)(Object(m.a)({},n),{},Object(h.a)({},e,Object(h.a)({},t,a)))})),setTimeout((function(){o((function(a){return Object(m.a)(Object(m.a)({},a),{},Object(h.a)({},e,Object(h.a)({},t,n)))}))}),1e3)):(o((function(t){return Object(m.a)(Object(m.a)({},t),{},Object(h.a)({},e,a))})),setTimeout((function(){o((function(t){return Object(m.a)(Object(m.a)({},t),{},Object(h.a)({},e,n))}))}),1e3))}}}(),k=N.startBattle,S=N.endBattle,A=N.style,M=N.handleAttackAnimation,T=N.currentBattle,E=N.setCurrentBattle,B=function(){var e=Object(r.useState)({}),t=Object(O.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)(0),c=Object(O.a)(s,2),i=c[0],o=c[1];function d(){return(d=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("/api/game/".concat(a.id));case 3:t=e.sent,o(Number(t.data[0].score)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.message),o(NaN);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return{game:a,setGame:n,startGame:function(e,t){var a={player_name:e};t("TRANSITION"),f.a.post("/api/games",a).then((function(e){var a=e.data;n((function(e){return Object(m.a)(Object(m.a)({},e),{},{id:a})})),t("MAP")})).catch((function(e){return console.log("Error posting Game data: ",e)}))},score:i,setScore:o,updateScore:function(){return d.apply(this,arguments)}}}(),L=B.game,G=B.setGame,I=B.startGame,D=B.score,_=B.setScore,R=B.updateScore,P=B.lastResult,W=function(){var e=Object(r.useState)(!0),t=Object(O.a)(e,2);return{music:t[0],setMusic:t[1]}}(),F=W.music,H=W.setMusic,U=Object(r.useRef)(null),J="WINGAME",z="LOSEBATTLE",K="WINBATTLE",q="LOSEGAMENOTBOSS",ee="LOSEGAMETOBOSS",te="WINALLARENAS";return Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s!==t){e.next=16;break}e.t0=v,e.next=e.t0===J?4:e.t0===K||e.t0===te?6:e.t0===z?8:e.t0===q||e.t0===ee?10:12;break;case 4:return U.current.src="/sounds/win-game.mp3",e.abrupt("break",13);case 6:return U.current.src="/sounds/win-battle.mp3",e.abrupt("break",13);case 8:return U.current.src="/sounds/lose-battle.mp3",e.abrupt("break",13);case 10:return U.current.src="/sounds/lose-game.mp3",e.abrupt("break",13);case 12:return e.abrupt("break",13);case 13:U.current.loop=!1,e.next=18;break;case 16:U.current.src="/sounds/background-music.mp3",U.current.loop=!0;case 18:if(e.prev=18,!U.current.paused){e.next=22;break}return e.next=22,U.current.play();case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(18),console.log("Music could not be played");case 27:case"end":return e.stop()}}),e,null,[[18,24]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[s]),Object(r.useEffect)((function(){var e=!!j;console.log("Props.arena is ",j,"and this is true? ",e)}),[s]),Object(r.useEffect)((function(){U.current.volume=F?.1:0}),[F]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("audio",{autoPlay:!0,loop:!0,ref:U,src:"/sounds/background-music.mp3",children:"Your browser does not support HTML audio."}),Object(n.jsxs)("div",{className:"canvas",children:[Object(n.jsx)(Z,{music:F,setMusic:H}),"START"===s&&Object(n.jsx)(y,{setMode:c,setGame:G,game:L,onSubmit:I}),"MAP"===s&&Object(n.jsx)(C,{setGameMode:c,score:D,game:L,updateScore:R,arena:j,arenas:o,setArena:p,arenasBeaten:b(o)}),"ARENA"===s&&Object(n.jsx)(Y,{setOutcome:w,setScore:_,initialPlayerHealth:100,challengerHealth:100,currentBattle:T,setCurrentBattle:E,startBattle:k,endBattle:S,style:A,handleAttackAnimation:M,setMode:c,arena:j,arenas:o,setArenas:d,game:L}),"TRANSITION"===s&&Object(n.jsx)($,{outcome:v}),s===t&&Object(n.jsx)(V,{outcome:v,lastResult:P,soundMedia:U,setMode:c,score:D,updateScore:R,resetGame:function(){c("START"),G({}),p([]),_(0),d(g),w("PENDING"),E([])},currentBattle:T,arena:j,setArena:p,cleanArenas:g}),"CREDITS"===s&&Object(n.jsx)(X,{setMode:c}),"INSTRUCTIONS"===s&&Object(n.jsx)(Q,{setMode:c,arena:j})]})]})};var te=function(){return Object(n.jsx)("div",{className:"app",children:Object(n.jsx)(ee,{})})},ae=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,80)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};a(78);f.a.defaults.baseURL="http://keyboard-warrior-api.herokuapp.com",f.a.interceptors.request.use((function(e){return e}),(function(e){return console.log("Request Error:",e),Promise.reject(e)})),f.a.interceptors.response.use((function(e){return e}),(function(e){return console.log("Response Error:",e),Promise.reject(e)})),i.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(te,{})}),document.getElementById("root")),ae()}},[[79,1,2]]]);
//# sourceMappingURL=main.db7051fb.chunk.js.map